<!--
  ã“ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã®ç‹™ã„:
  åºƒå‘Šãƒãƒ£ãƒãƒ«åˆ¥CPI/CPA/ROASã®ä¸€è¦§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€‚
  å„ãƒãƒ£ãƒãƒ«ï¼ˆApple Search Ads, Google UAC, Meta, TikTok, LINE, Xï¼‰ã®
  ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å¯è¦–åŒ–ã—ã€äºˆç®—é…åˆ†ã®æ„æ€æ±ºå®šã‚’æ”¯æ´ã™ã‚‹ã€‚
  ãƒãƒ£ãƒãƒ«é–“ã®æ¯”è¼ƒã€ãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¤ºã€ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½ã‚’æ­è¼‰ã€‚
-->
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒãƒ£ãƒãƒ«åˆ¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - CPI/CPA/ROAS</title>
<script src="../auth.js"></script>
<style>
:root {
  --pink: #F84CA2;
  --dark-blue: #1c2663;
  --white: #FFFFFF;
  --text-black: #404040;
  --text-gray: #737373;
  --text-disabled: #B3B3B3;
  --back-white: #FAFAFA;
  --back-gray: #EDF1F4;
  --back-blue: #091355;
  --error: #EB4646;
  --ruled-line: #F2F2F2;
  --gradient-primary: linear-gradient(90deg, #1ddcff, #4db4ff);
  --font-sans: 'Hiragino Sans', 'Noto Sans JP', system-ui, sans-serif;
  --font-number: 'Righteous', system-ui, sans-serif;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-6: 24px;
  --radius-md: 12px;
  --radius-chip: 22px;
  --radius-button: 30px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: var(--font-sans);
  background: var(--back-white);
  color: var(--text-black);
  max-width: 375px;
  margin: 0 auto;
  min-height: 100vh;
}
/* Header */
.header {
  background: linear-gradient(135deg, var(--back-blue) 0%, #1d2e93 100%);
  padding: 48px 20px 20px;
  color: var(--white);
}
.header h1 { font-size: 18px; font-weight: bold; line-height: 27px; }
.header .subtitle { font-size: 12px; color: rgba(255,255,255,0.7); margin-top: 4px; }
.date-badge {
  display: inline-block;
  background: rgba(255,255,255,0.15);
  border-radius: var(--radius-chip);
  padding: 4px 12px;
  font-size: 11px;
  color: rgba(255,255,255,0.9);
  margin-top: 8px;
}

/* Summary Cards */
.summary-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 8px;
  padding: 12px 16px;
  margin-top: -16px;
}
.summary-card {
  background: var(--white);
  border-radius: var(--radius-md);
  padding: 12px 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  text-align: center;
}
.summary-card .label { font-size: 10px; color: var(--text-gray); font-weight: bold; }
.summary-card .value {
  font-family: var(--font-number);
  font-size: 20px;
  font-weight: bold;
  color: var(--dark-blue);
  margin-top: 4px;
}
.summary-card .change {
  font-size: 10px;
  margin-top: 2px;
  font-weight: bold;
}
.change.up { color: var(--error); }
.change.down { color: #10b981; }

/* Period Tabs */
.period-tabs {
  display: flex;
  gap: 8px;
  padding: 8px 16px;
  overflow-x: auto;
}
.period-tab {
  border: 1px solid var(--ruled-line);
  background: var(--white);
  border-radius: var(--radius-chip);
  padding: 6px 14px;
  font-size: 12px;
  font-weight: bold;
  color: var(--text-gray);
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.2s;
}
.period-tab.active {
  background: var(--dark-blue);
  color: var(--white);
  border-color: var(--dark-blue);
}

/* Channel Cards */
.channels { padding: 8px 16px 16px; }
.channel-card {
  background: var(--white);
  border-radius: var(--radius-md);
  padding: 16px;
  margin-bottom: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  border: 1px solid var(--ruled-line);
  cursor: pointer;
  transition: all 0.2s;
}
.channel-card:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
.channel-card.expanded { border-color: var(--dark-blue); }
.channel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.channel-name {
  display: flex;
  align-items: center;
  gap: 8px;
}
.channel-icon {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: bold;
  color: var(--white);
}
.channel-title { font-size: 14px; font-weight: bold; }
.channel-budget {
  font-size: 11px;
  color: var(--text-gray);
  background: var(--back-gray);
  border-radius: var(--radius-chip);
  padding: 2px 8px;
}
.channel-metrics {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  gap: 8px;
  margin-top: 12px;
}
.metric {
  text-align: center;
}
.metric .m-label { font-size: 9px; color: var(--text-gray); font-weight: bold; }
.metric .m-value {
  font-family: var(--font-number);
  font-size: 14px;
  font-weight: bold;
  color: var(--dark-blue);
  margin-top: 2px;
}
.metric .m-change { font-size: 9px; font-weight: bold; margin-top: 1px; }

/* Efficiency Bar */
.efficiency-bar-wrap { margin-top: 12px; }
.efficiency-label {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: var(--text-gray);
  margin-bottom: 4px;
}
.efficiency-bar {
  height: 6px;
  background: var(--back-gray);
  border-radius: 3px;
  overflow: hidden;
}
.efficiency-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.8s ease;
}

/* Detail Panel */
.channel-detail {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}
.channel-card.expanded .channel-detail {
  max-height: 300px;
}
.detail-content {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--ruled-line);
}
.detail-row {
  display: flex;
  justify-content: space-between;
  padding: 4px 0;
  font-size: 12px;
}
.detail-row .dl { color: var(--text-gray); }
.detail-row .dv { font-weight: bold; color: var(--dark-blue); }

/* Alert */
.alert-bar {
  margin: 0 16px 12px;
  background: #FFF5F5;
  border: 1px solid #FECACA;
  border-radius: var(--radius-md);
  padding: 10px 12px;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}
.alert-icon { font-size: 16px; flex-shrink: 0; }
.alert-text { font-size: 11px; color: var(--error); line-height: 1.6; }
.alert-text strong { font-size: 12px; }

/* Ranking */
.ranking-section {
  padding: 8px 16px 24px;
}
.ranking-title {
  font-size: 14px;
  font-weight: bold;
  color: var(--dark-blue);
  margin-bottom: 12px;
}
.ranking-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}
.ranking-table th {
  background: var(--back-gray);
  padding: 8px 6px;
  text-align: center;
  font-weight: bold;
  color: var(--text-gray);
  font-size: 10px;
}
.ranking-table td {
  padding: 8px 6px;
  text-align: center;
  border-bottom: 1px solid var(--ruled-line);
}
.ranking-table tr:first-child td { font-weight: bold; color: var(--dark-blue); }
.rank-badge {
  display: inline-block;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  font-size: 10px;
  font-weight: bold;
  line-height: 18px;
  text-align: center;
  color: var(--white);
}
.rank-1 { background: #F59E0B; }
.rank-2 { background: #9CA3AF; }
.rank-3 { background: #B45309; }
.rank-other { background: var(--text-disabled); }

/* Bottom CTA */
.bottom-cta {
  position: sticky;
  bottom: 0;
  padding: 12px 16px;
  background: var(--white);
  border-top: 1px solid var(--ruled-line);
}
.cta-button {
  width: 100%;
  height: 48px;
  border: none;
  border-radius: var(--radius-button);
  background: var(--gradient-primary);
  font-size: 14px;
  font-weight: bold;
  color: var(--dark-blue);
  cursor: pointer;
  transition: opacity 0.2s;
}
.cta-button:active { opacity: 0.8; }

/* Animation */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate { animation: fadeInUp 0.4s ease forwards; }
.delay-1 { animation-delay: 0.1s; opacity: 0; }
.delay-2 { animation-delay: 0.2s; opacity: 0; }
.delay-3 { animation-delay: 0.3s; opacity: 0; }
.delay-4 { animation-delay: 0.4s; opacity: 0; }
.delay-5 { animation-delay: 0.5s; opacity: 0; }
</style>
</head>
<body>

<div class="header">
  <h1>åºƒå‘Šãƒãƒ£ãƒãƒ«åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</h1>
  <div class="subtitle">CPI / CPA / ROAS ä¸€è¦§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</div>
  <div class="date-badge">ğŸ“Š 2026å¹´2æœˆ26æ—¥ æ›´æ–°</div>
</div>

<div class="summary-row">
  <div class="summary-card animate delay-1">
    <div class="label">å¹³å‡CPI</div>
    <div class="value">Â¥385</div>
    <div class="change down">â–¼ 8% å‰é€±æ¯”</div>
  </div>
  <div class="summary-card animate delay-2">
    <div class="label">å¹³å‡CPA</div>
    <div class="value">Â¥4,120</div>
    <div class="change down">â–¼ 5% å‰é€±æ¯”</div>
  </div>
  <div class="summary-card animate delay-3">
    <div class="label">ç·DLæ•°</div>
    <div class="value">1,847</div>
    <div class="change down">â–² 12% å‰é€±æ¯”</div>
  </div>
</div>

<div class="period-tabs">
  <button class="period-tab active" onclick="setPeriod(this)">ä»Šé€±</button>
  <button class="period-tab" onclick="setPeriod(this)">å…ˆé€±</button>
  <button class="period-tab" onclick="setPeriod(this)">ä»Šæœˆ</button>
  <button class="period-tab" onclick="setPeriod(this)">å…ˆæœˆ</button>
  <button class="period-tab" onclick="setPeriod(this)">3ãƒ¶æœˆ</button>
</div>

<div class="alert-bar animate delay-2">
  <span class="alert-icon">âš ï¸</span>
  <div class="alert-text">
    <strong>Xåºƒå‘Šã®CPIãŒå‰é€±æ¯”+32%ä¸Šæ˜‡</strong><br>
    ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ç–²å¼Šã®å¯èƒ½æ€§ã€‚å·®ã—æ›¿ãˆæ¤œè¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
  </div>
</div>

<div class="channels" id="channelList">
  <!-- Channels will be rendered by JS -->
</div>

<div class="ranking-section">
  <div class="ranking-title">ãƒãƒ£ãƒãƒ«åŠ¹ç‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°</div>
  <table class="ranking-table" id="rankingTable">
    <thead>
      <tr>
        <th>é †ä½</th>
        <th>ãƒãƒ£ãƒãƒ«</th>
        <th>CPI</th>
        <th>DLâ†’ç”³è¾¼ç‡</th>
        <th>CPA</th>
        <th>æ¨å¥¨</th>
      </tr>
    </thead>
    <tbody id="rankingBody"></tbody>
  </table>
</div>

<div class="bottom-cta">
  <button class="cta-button" onclick="showRecommendation()">äºˆç®—å†é…åˆ†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ â†’</button>
</div>

<script>
const channels = [
  {
    name: 'Apple Search Ads',
    icon: 'ğŸ',
    color: '#000000',
    budget: 'Â¥320,000',
    cpi: 280, cpiChange: -12,
    cpa: 2800, cpaChange: -8,
    roas: 3.2, roasChange: 15,
    dl: 1143, dlChange: 18,
    cvr: 10.0,
    efficiency: 92,
    effColor: '#10b981',
    details: {
      'ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³': '45,230',
      'ã‚¿ãƒƒãƒ—æ•°': '8,120',
      'ã‚¿ãƒƒãƒ—ç‡ (TTR)': '18.0%',
      'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‡': '62.3%',
      'DLâ†’AIæŸ»å®šç‡': '34.2%',
      'AIæŸ»å®šâ†’ç”³è¾¼ç‡': '29.3%',
      'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä¸Šä½': 'è»Š æŸ»å®š, è»Š å£²å´, æ„›è»Š ä¾¡æ ¼',
    }
  },
  {
    name: 'Google UAC',
    icon: 'G',
    color: '#4285F4',
    budget: 'Â¥280,000',
    cpi: 420, cpiChange: -5,
    cpa: 4200, cpaChange: -3,
    roas: 2.1, roasChange: 8,
    dl: 667, dlChange: 10,
    cvr: 10.0,
    efficiency: 72,
    effColor: '#3b82f6',
    details: {
      'ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³': '128,500',
      'ã‚¯ãƒªãƒƒã‚¯æ•°': '4,820',
      'CTR': '3.8%',
      'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‡': '13.8%',
      'DLâ†’AIæŸ»å®šç‡': '28.1%',
      'AIæŸ»å®šâ†’ç”³è¾¼ç‡': '25.6%',
      'é…ä¿¡é¢': 'Search 40%, YouTube 35%, Display 25%',
    }
  },
  {
    name: 'LINEåºƒå‘Š',
    icon: 'L',
    color: '#06C755',
    budget: 'Â¥150,000',
    cpi: 380, cpiChange: -3,
    cpa: 3800, cpaChange: -6,
    roas: 2.4, roasChange: 10,
    dl: 395, dlChange: 8,
    cvr: 10.0,
    efficiency: 78,
    effColor: '#06C755',
    details: {
      'ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³': '82,100',
      'ã‚¯ãƒªãƒƒã‚¯æ•°': '3,280',
      'CTR': '4.0%',
      'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‡': '12.0%',
      'DLâ†’AIæŸ»å®šç‡': '30.5%',
      'AIæŸ»å®šâ†’ç”³è¾¼ç‡': '26.8%',
      'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ': '30-50ä»£ç”·æ€§, è‡ªå‹•è»Šé–¢å¿ƒå±¤',
    }
  },
  {
    name: 'Meta Ads',
    icon: 'M',
    color: '#1877F2',
    budget: 'Â¥200,000',
    cpi: 480, cpiChange: +5,
    cpa: 5200, cpaChange: +2,
    roas: 1.7, roasChange: -4,
    dl: 417, dlChange: 3,
    cvr: 9.2,
    efficiency: 58,
    effColor: '#f59e0b',
    details: {
      'ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³': '95,400',
      'ã‚¯ãƒªãƒƒã‚¯æ•°': '3,050',
      'CTR': '3.2%',
      'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‡': '13.7%',
      'DLâ†’AIæŸ»å®šç‡': '25.8%',
      'AIæŸ»å®šâ†’ç”³è¾¼ç‡': '21.3%',
      'é…ä¿¡é¢': 'Reels 45%, Feed 30%, Stories 25%',
    }
  },
  {
    name: 'TikTok Ads',
    icon: 'T',
    color: '#000000',
    budget: 'Â¥120,000',
    cpi: 350, cpiChange: -15,
    cpa: 4800, cpaChange: -10,
    roas: 1.5, roasChange: 5,
    dl: 343, dlChange: 22,
    cvr: 7.3,
    efficiency: 55,
    effColor: '#f59e0b',
    details: {
      'ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³': '210,000',
      'ã‚¯ãƒªãƒƒã‚¯æ•°': '6,300',
      'CTR': '3.0%',
      'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‡': '5.4%',
      'DLâ†’AIæŸ»å®šç‡': '18.2%',
      'AIæŸ»å®šâ†’ç”³è¾¼ç‡': '15.8%',
      'ãƒˆãƒƒãƒ—ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–': 'UGCé¢¨ã€ŒAIæŸ»å®šã‚„ã£ã¦ã¿ãŸã€',
    }
  },
  {
    name: 'X (Twitter) Ads',
    icon: 'ğ•',
    color: '#000000',
    budget: 'Â¥80,000',
    cpi: 640, cpiChange: +32,
    cpa: 7500, cpaChange: +18,
    roas: 0.9, roasChange: -22,
    dl: 125, dlChange: -8,
    cvr: 8.5,
    efficiency: 28,
    effColor: '#ef4444',
    details: {
      'ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³': '52,000',
      'ã‚¯ãƒªãƒƒã‚¯æ•°': '1,560',
      'CTR': '3.0%',
      'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‡': '8.0%',
      'DLâ†’AIæŸ»å®šç‡': '22.4%',
      'AIæŸ»å®šâ†’ç”³è¾¼ç‡': '19.1%',
      'èª²é¡Œ': 'ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ç–²å¼Šï¼ˆåŒä¸€ç´ æ3é€±é–“é‹ç”¨ï¼‰',
    }
  }
];

function renderChannels() {
  const container = document.getElementById('channelList');
  container.innerHTML = channels.map((ch, i) => `
    <div class="channel-card animate delay-${Math.min(i+1, 5)}" onclick="toggleDetail(this)" id="ch-${i}">
      <div class="channel-header">
        <div class="channel-name">
          <div class="channel-icon" style="background:${ch.color}">${ch.icon}</div>
          <div>
            <div class="channel-title">${ch.name}</div>
          </div>
        </div>
        <div class="channel-budget">${ch.budget}/é€±</div>
      </div>
      <div class="channel-metrics">
        <div class="metric">
          <div class="m-label">CPI</div>
          <div class="m-value">Â¥${ch.cpi.toLocaleString()}</div>
          <div class="m-change ${ch.cpiChange <= 0 ? 'down' : 'up'}">${ch.cpiChange <= 0 ? 'â–¼' : 'â–²'} ${Math.abs(ch.cpiChange)}%</div>
        </div>
        <div class="metric">
          <div class="m-label">CPA</div>
          <div class="m-value">Â¥${ch.cpa.toLocaleString()}</div>
          <div class="m-change ${ch.cpaChange <= 0 ? 'down' : 'up'}">${ch.cpaChange <= 0 ? 'â–¼' : 'â–²'} ${Math.abs(ch.cpaChange)}%</div>
        </div>
        <div class="metric">
          <div class="m-label">ROAS</div>
          <div class="m-value">${ch.roas}x</div>
          <div class="m-change ${ch.roasChange >= 0 ? 'down' : 'up'}">${ch.roasChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(ch.roasChange)}%</div>
        </div>
        <div class="metric">
          <div class="m-label">DLæ•°</div>
          <div class="m-value">${ch.dl.toLocaleString()}</div>
          <div class="m-change ${ch.dlChange >= 0 ? 'down' : 'up'}">${ch.dlChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(ch.dlChange)}%</div>
        </div>
      </div>
      <div class="efficiency-bar-wrap">
        <div class="efficiency-label">
          <span>åŠ¹ç‡ã‚¹ã‚³ã‚¢</span>
          <span style="font-weight:bold;color:${ch.effColor}">${ch.efficiency}%</span>
        </div>
        <div class="efficiency-bar">
          <div class="efficiency-fill" style="width:${ch.efficiency}%;background:${ch.effColor}"></div>
        </div>
      </div>
      <div class="channel-detail">
        <div class="detail-content">
          ${Object.entries(ch.details).map(([k,v]) => `
            <div class="detail-row">
              <span class="dl">${k}</span>
              <span class="dv">${v}</span>
            </div>
          `).join('')}
        </div>
      </div>
    </div>
  `).join('');
}

function renderRanking() {
  const sorted = [...channels].sort((a, b) => a.cpi - b.cpi);
  const body = document.getElementById('rankingBody');
  body.innerHTML = sorted.map((ch, i) => {
    const rankClass = i < 3 ? `rank-${i+1}` : 'rank-other';
    const recommend = ch.efficiency >= 70 ? 'ğŸŸ¢ å¢—é¡' : ch.efficiency >= 50 ? 'ğŸŸ¡ ç¶­æŒ' : 'ğŸ”´ è¦‹ç›´ã—';
    return `
      <tr>
        <td><span class="rank-badge ${rankClass}">${i+1}</span></td>
        <td style="text-align:left;font-weight:bold">${ch.name}</td>
        <td>Â¥${ch.cpi.toLocaleString()}</td>
        <td>${ch.cvr}%</td>
        <td>Â¥${ch.cpa.toLocaleString()}</td>
        <td>${recommend}</td>
      </tr>
    `;
  }).join('');
}

function toggleDetail(card) {
  card.classList.toggle('expanded');
}

function setPeriod(el) {
  document.querySelectorAll('.period-tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
}

function showRecommendation() {
  alert('äºˆç®—å†é…åˆ†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢ã¸é·ç§»ã—ã¾ã™\n\næ¨å¥¨:\n1. Apple Search Ads: +Â¥80,000 å¢—é¡\n2. X Ads: -Â¥50,000 æ¸›é¡\n3. TikTok: +Â¥30,000 å¢—é¡ï¼ˆUGCåŠ¹æœï¼‰');
}

renderChannels();
renderRanking();
</script>

</body>
</html>
